## 1. Обновлённые функциональные требования

### UC1 — Регистрация
- ✅ **FR‑1.** Система должна предоставлять пользователю возможность создать учётную запись.  
- ✅ **FR‑2.** Система должна проверять корректность введённых регистрационных данных.  
- ✅ **FR‑3.** Система должна сохранять новый аккаунт в базе данных.  
- ✅ **FR‑4.** Система должна авторизовать пользователя после успешной регистрации.  
- ✅ **FR‑5.** Система должна информировать пользователя об ошибках при некорректных данных.  

---

### UC2 — Вход в систему
- ✅ **FR‑6.** Система должна предоставлять форму для ввода учётных данных.  
- ✅ **FR‑7.** Система должна проверять корректность введённых данных при входе.  
- ✅ **FR‑8.** Система должна предоставлять доступ к функционалу при успешной авторизации.  
- ✅ **FR‑9.** Система должна информировать пользователя об ошибке при неверных данных.  

---

### UC3 — Просмотр истории действий
- ✅ **FR‑10.** Система должна хранить историю рецептов и их оценки (при наличии).  
- ✅ **FR‑11.** Система должна предоставлять пользователю список приготовленных рецептов.  
- ✅ **FR‑12.** Система должна информировать пользователя об отсутствии данных, если история пуста.  

---

### UC4 — Управление профилем
- ✅ **FR‑13.** Система должна предоставлять пользователю возможность изменять данные профиля (имя, предпочтения, ограничения).  
- ✅ **FR‑14.** Система должна сохранять изменения профиля.  
- ✅ **FR‑15.** Система должна учитывать обновлённые данные при подборе рецептов и меню.  
- ✅ **FR‑16.** Система должна информировать пользователя об ошибках при некорректных данных.  

---

### UC5 — Запрос списка рецептов по ингредиентам
- ✅ **FR‑17.** Система должна предоставлять пользователю возможность загрузить фото продуктов.  
- ✅ **FR‑18.** Система должна распознавать ингредиенты на фото.  
- ✅ **FR‑20.** Система должна предоставлять пользователю список распознанных ингредиентов.  
- ✅ **FR‑21.** Система должна информировать пользователя о необходимости загрузить новое фото, если продукты не распознаны.  

---

### UC6 — Исключение ингредиентов
- ✅ **FR‑22.** Система должна предоставлять пользователю возможность исключать ингредиенты из списка.  
- ✅ **FR‑23.** Система должна генерировать список рецептов на основе оставшихся ингредиентов.  
- ✅ **FR‑24.** Система должна предоставлять пользователю обновлённый список рецептов.  
- ✅ **FR‑25.** Система должна поддерживать повторную генерацию рецептов на основе обратной связи пользователя.  

---

### UC7 — Выбор рецепта
- ✅ **FR‑26.** Система должна предоставлять пользователю список доступных рецептов.  
- ✅ **FR‑27.** Система должна предоставлять пользователю возможность выбрать один рецепт.  
- ✅ **FR‑28.** Система должна предоставлять план приготовления выбранного блюда в текстовом формате.  
- ✅ **FR‑29.** Система должна поддерживать возврат к списку рецептов и выбор другого рецепта.  
- ✅ **FR‑30.** Система должна поддерживать повторную генерацию списка рецептов.  

---

### UC8 — Оставление отзыва
- ✅ **FR‑31.** Система должна предоставлять пользователю возможность оставить отзыв о приготовленном рецепте.  
- ✅ **FR‑32.** Система должна предоставлять пользователю возможность выставить оценку рецепту.  
- ✅ **FR‑33.** Система должна сохранять отзыв и/или оценку в истории пользователя.  
- ✅ **FR‑34.** Система должна учитывать отзывы и оценки для улучшения рекомендаций.  
- ✅ **FR‑35.** Система должна завершать сценарий без сохранения данных, если пользователь отказался от отзыва.  

---

### UC9 — Добавление в избранное
- ✅ **FR‑36.** Система должна предоставлять пользователю возможность добавить рецепт в избранное.  
- ✅ **FR‑37.** Система должна сохранять список избранных рецептов в базе данных (SQLite).  
- ✅ **FR‑38.** Система должна предоставлять пользователю доступ к списку избранных рецептов.  
- ✅ **FR‑39.** Система должна информировать пользователя об ошибке при добавлении рецепта в избранное и сохранять действие в черновиках для повторной отправки.  


---
## 2. Definition of Done (DoD) для функций

Функция считается завершённой, если:

- **Реализована в коде и доступна через UI (HTML/CSS) или API (FastAPI).**  
  - UC1–UC2: регистрация и вход выполняются через форму на сайте.  
  - UC3: история отображается в личном кабинете.  
  - UC4: профиль можно редактировать и сохранять.  
  - UC5: загрузка фото и список распознанных ингредиентов доступны.  
  - UC6: исключение ингредиентов работает в интерфейсе.  
  - UC7: выбор рецепта и план приготовления отображаются.  
  - UC8: отзывы можно оставлять и они сохраняются.  
  - UC9: избранное доступно в личном кабинете.

- **Протестирована по критериям приёмки.**  
  Для каждого UC проверяется:  
  - корректные данные → успешный сценарий,  
  - некорректные данные → сообщение об ошибке.  
  Все UC прошли тестирование и работают end‑to‑end.

- **Данные сохраняются в SQLite и доступны через API/UI.**  
  - UC1–UC2: аккаунты пользователей.  
  - UC3: история приготовленных рецептов.  
  - UC4: настройки профиля.  
  - UC5–UC6: список распознанных ингредиентов и исключения.  
  - UC7: выбранные рецепты.  
  - UC8: отзывы и оценки.  
  - UC9: список избранного.

- **Документация обновлена.**  
  - API описан в OpenAPI/Swagger.  
  - README содержит инструкции по запуску и проверке функций.  

- **Нет критических багов, функция проходит интеграционный тест.**  
  Интеграционный тест — сквозной сценарий:  
  1. Пользователь регистрируется.  
  2. Входит в систему.  
  3. Загружает фото продуктов.  
  4. Получает список ингредиентов.  
  5. Исключает ненужные продукты.  
  6. Выбирает рецепт.  
  7. Рецепт сохраняется в истории и может быть добавлен в избранное.  
  8. Пользователь оставляет отзыв.  
  Если весь путь работает без ошибок и бизнес‑метрики достигнуты (точность ≥ 65%, время ответа ≤ 3 сек, удовлетворённость ≥ 60%), функция считается завершённой.

---

## 3. North Star Metric

Среднее количество приготовленных рецептов на одного активного пользователя в неделю.

---

## 4. Документация изменений

- На основе результатов тестирования требования скорректированы.  
- DoD обновлён.  
- North Star Metric остаётся без изменений.
- Все изменения зафиксированы для подготовки к Demo Day.
