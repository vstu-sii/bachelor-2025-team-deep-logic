@startuml
!includeurl https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml

title Container Diagram — AI Personal Chef

LAYOUT_LEFT_RIGHT()

Person(user, "Пользователь")
Person(admin, "Администратор")

System_Boundary(aiChef, "AI Personal Chef") {
    Container(app, "Мобильное/Веб-приложение", "Flutter", "Интерфейс для пользователей")
    Container(api, "Backend API", "Python/FastAPI", "Обработка фото, логика подбора рецептов")
    Container(db, "База данных", "PostgreSQL", "Хранение пользователей, истории и рецептов")
}

' --- Внешние системы ---
System_Ext(vlm, "VLM (Vision-Language Model)", "Распознаёт продукты на фото и формирует список ингредиентов")
System_Ext(llm, "LLM API", "Подбирает рецепты по списку продуктов")
System_Ext(notify, "Сервис уведомлений", "Отправляет push/email")

' --- Связи ---
Rel(user, app, "Загружает фото, получает рецепты", "HTTPS")
Rel(admin, api, "Администрирует рецепты", "HTTPS")

Rel(app, api, "Запросы/ответы", "HTTPS")
Rel(api, db, "Чтение/запись данных", "SQL")
Rel(api, vlm, "Передаёт фото для распознавания", "gRPC/HTTP")
Rel(api, llm, "Запрос рецептов по продуктам", "HTTPS")
Rel(api, notify, "Отправляет уведомления", "HTTPS")

@enduml
