# üìä –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ Bottleneck'–æ–≤ Locust

## –°—Ü–µ–Ω–∞—Ä–∏–π 1: 3 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è √ó 2 –∫—Ä—É–≥–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

### –û–±—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏
- **–ó–∞–ø—Ä–æ—Å–æ–≤:** 101  
- **–û—à–∏–±–æ–∫:** 0  
- **–°—Ä–µ–¥–Ω—è—è –∑–∞–¥–µ—Ä–∂–∫–∞:** ~398 ms  
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞:** ~6872 ms  
- **RPS:** 0.19  
- **95-–π –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª—å:** ~3900 ms  
- **99-–π –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª—å:** ~5700 ms  

### –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è
  1) **Cook-from-image:** –∑–∞–¥–µ—Ä–∂–∫–∏ 3.4‚Äì6.9 —Å–µ–∫—É–Ω–¥ ‚Üí –≥–ª–∞–≤–Ω—ã–π bottleneck.  
  2) **Task-result:** –±—ã—Å—Ç—Ä—ã–µ (5‚Äì27 ms), –Ω–æ —á–∞—Å—Ç—ã–µ (7‚Äì13 –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –∑–∞–¥–∞—á—É).  
  3) **Test-vlm:** —Å—Ç–∞–±–∏–ª—å–Ω—ã–π (10‚Äì45 ms).  

---

## –°—Ü–µ–Ω–∞—Ä–∏–π 2: 12 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π √ó 1 –∫—Ä—É–≥ –∑–∞–ø—Ä–æ—Å–æ–≤

### –û–±—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏
- **–ó–∞–ø—Ä–æ—Å–æ–≤:** 530  
- **–û—à–∏–±–æ–∫:** 0  
- **–°—Ä–µ–¥–Ω—è—è –∑–∞–¥–µ—Ä–∂–∫–∞:** ~98 ms  
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞:** ~7064 ms  
- **RPS:** 0.64  
- **95-–π –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª—å:** ~30 ms  
- **99-–π –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª—å:** ~3800 ms  

### –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è
  1) **Cook-from-image:** –∑–∞–¥–µ—Ä–∂–∫–∏ 2‚Äì7 —Å–µ–∫—É–Ω–¥, –æ—Å—Ç–∞—ë—Ç—Å—è –≥–ª–∞–≤–Ω—ã–º bottleneck.  
  2) **Task-result:** –±—ã—Å—Ç—Ä—ã–µ (10‚Äì30 ms), –Ω–æ –Ω–∞–≥—Ä—É–∑–∫–∞ –≤—ã—Ä–æ—Å–ª–∞ √ó4 –∏–∑-–∑–∞ –±–æ–ª—å—à–µ–≥–æ —á–∏—Å–ª–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.  
  3) **Test-vlm:** —Å—Ç–∞–±–∏–ª—å–Ω—ã–π (15‚Äì61 ms).  

---

## –°—Ü–µ–Ω–∞—Ä–∏–π 3: 30 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π √ó 1 –∫—Ä—É–≥ –∑–∞–ø—Ä–æ—Å–æ–≤

### –û–±—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏
- **–ó–∞–ø—Ä–æ—Å–æ–≤:** 1752  
- **–û—à–∏–±–æ–∫:** 0  
- **–°—Ä–µ–¥–Ω—è—è –∑–∞–¥–µ—Ä–∂–∫–∞:** ~67.8 ms  
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞:** ~11560 ms  
- **RPS:** 4.61  
- **95-–π –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª—å:** ~14 ms  
- **99-–π –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª—å:** ~81 ms  

### –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è
  1) **Cook-from-image:** –æ—Å—Ç–∞—ë—Ç—Å—è —É–∑–∫–∏–º –º–µ—Å—Ç–æ–º ‚Äî –∑–∞–¥–µ—Ä–∂–∫–∏ 6‚Äì12 —Å–µ–∫—É–Ω–¥, –ø—Ä–∏ —Ä–æ—Å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫–∏ —á–∞—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç >10 —Å–µ–∫—É–Ω–¥.  
  2) **Task-result:** –±—ã—Å—Ç—Ä—ã–µ (7‚Äì11 ms), –Ω–æ –æ—á–µ–Ω—å —á–∞—Å—Ç—ã–µ (—Å–æ—Ç–Ω–∏ GET –Ω–∞ –∑–∞–¥–∞—á—É), —Å–æ–∑–¥–∞—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ API.  
  3) **Test-vlm:** —Å—Ç–∞–±–∏–ª—å–Ω—ã–π (21‚Äì64 ms), –Ω–∞–≥—Ä—É–∑–∫–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ.  
  4) **–û–±—â–µ–µ:** —Å–∏—Å—Ç–µ–º–∞ –≤—ã–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 30 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Å—Ä–µ–¥–Ω—è—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–∞–¥–∞–µ—Ç –∑–∞ —Å—á—ë—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –±—ã—Å—Ç—Ä—ã—Ö GET, –Ω–æ cook‚Äë—ç—Ç–∞–ø –æ—Å—Ç–∞—ë—Ç—Å—è bottleneck.  

---

## üìå –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –°—Ü–µ–Ω–∞—Ä–∏–π | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ | –ö—Ä—É–≥–∏ | –ó–∞–ø—Ä–æ—Å–æ–≤ | –û—à–∏–±–æ–∫ | –°—Ä–µ–¥–Ω—è—è –∑–∞–¥–µ—Ä–∂–∫–∞ | –ú–∞–∫—Å –∑–∞–¥–µ—Ä–∂–∫–∞ | 95-–π –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª—å | 99-–π –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª—å | Bottleneck |
|----------|--------------|-------|----------|--------|------------------|---------------|-----------------|-----------------|------------|
| 1        | 3            | 2     | 101      | 0      | ~398 ms          | ~6872 ms      | ~3900 ms        | ~5700 ms        | Cook-from-image |
| 2        | 12           | 1     | 530      | 0      | ~98 ms           | ~7064 ms      | ~30 ms          | ~3800 ms        | Cook-from-image |
| 3        | 30           | 1     | 1752     | 0      | ~68 ms           | ~11560 ms     | ~14 ms          | ~81 ms          | Cook-from-image |

---

## üéØ –ò—Ç–æ–≥
–ü—Ä–∏ **3√ó2** —Å–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–±–∏–ª—å–Ω–∞, –Ω–æ cook‚Äë—ç—Ç–∞–ø –º–µ–¥–ª–µ–Ω–Ω—ã–π (3‚Äì7 —Å–µ–∫—É–Ω–¥).  
–ü—Ä–∏ **12√ó1** –Ω–∞–≥—Ä—É–∑–∫–∞ –≤—ã—à–µ, —Å—Ä–µ–¥–Ω—è—è –∑–∞–¥–µ—Ä–∂–∫–∞ –Ω–∏–∂–µ (–∑–∞ —Å—á—ë—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –±—ã—Å—Ç—Ä—ã—Ö GET), –Ω–æ cook‚Äë—ç—Ç–∞–ø –æ—Å—Ç–∞—ë—Ç—Å—è —É–∑–∫–∏–º –º–µ—Å—Ç–æ–º.  
–ü—Ä–∏ **30√ó1** —Å–∏—Å—Ç–µ–º–∞ –≤—ã–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É, —Å—Ä–µ–¥–Ω—è—è –∑–∞–¥–µ—Ä–∂–∫–∞ –µ—â—ë –Ω–∏–∂–µ (~68 ms), –Ω–æ **–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ cook‚Äë—ç—Ç–∞–ø–∞ –¥–æ—Å—Ç–∏–≥–∞—é—Ç 11‚Äì12 —Å–µ–∫—É–Ω–¥**.  
–ì–ª–∞–≤–Ω—ã–π bottleneck –≤–æ –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö: **`POST /cook-from-image`**.  
–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ñ–∞–∫—Ç–æ—Ä: —á–∞—Å—Ç—ã–µ `GET /task-result`, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏ —Ä–æ—Å—Ç–µ —á–∏—Å–ª–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–æ–∑–¥–∞—é—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É.  
