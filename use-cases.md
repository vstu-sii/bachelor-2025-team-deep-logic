# Use-cases Narrative

![USE-CASE_DIAGRAM](use_case.png)

Рис. 1 - Диаграмма вариантов использования (Use-case UML диаграмма)

## UC1 — Загрузить фото продуктов

**Акторы:** Пользователь (основной), Система (AI Personal Chef)  
**Предусловия:** Пользователь авторизован; устройство имеет доступ к камере или галерее; интернет соединение активно  

### Happy Path
1. Пользователь открывает экран загрузки фото  
2. Делает снимок или выбирает фото из галереи  
3. Система отправляет фото в Backend API  
4. Backend API передаёт фото в VLM-сервис  
5. VLM распознаёт продукты и возвращает список ингредиентов  
6. Backend API сохраняет результат в базе данных  
7. Система отображает список распознанных продуктов пользователю  

### Alternative Flows
- 2a. Нет доступа к камере → пользователь выбирает фото из галереи  
- 5a. VLM не распознал часть продуктов → система предлагает ввести вручную  

### Error Handling
- Нет интернета → сообщение об ошибке, повторная попытка  
- Ошибка загрузки фото → уведомление и возможность повторить  
- Превышен лимит фото → подсказка очистить историю  

### User Value
- Экономия времени на ручном вводе  
- Удобный старт для подбора рецептов  
- Снижение пищевых отходов  

---

## UC2 — Получить список рецептов

**Акторы:** Пользователь (основной), Система (AI Personal Chef)  
**Предусловия:** Пользователь авторизован; список распознанных продуктов сохранён в системе  

### Happy Path
1. Пользователь открывает экран «Рецепты»  
2. Система отправляет список продуктов в LLM API  
3. LLM API формирует список подходящих рецептов  
4. Backend API сохраняет список рецептов в базе данных  
5. Система отображает список рецептов пользователю  

### Alternative Flows
- 3a. Нет рецептов под текущие продукты → система предлагает базовые блюда  
- 3b. Пользователь вручную исключает ингредиенты и получает обновлённый список  

### Error Handling
- Ошибка связи с LLM API → fallback на сохранённые рецепты  
- Некорректный ответ от API → уведомление и повторный запрос  
- Таймаут запроса → предложение повторить позже  

### User Value
- Экономия времени на поиске рецептов  
- Персонализированный подбор под имеющиеся продукты  

---

## UC3 — Составить меню

**Акторы:** Пользователь (основной), Система (AI Personal Chef)  
**Предусловия:** Пользователь авторизован; в системе есть сохранённые рецепты  

### Happy Path
1. Пользователь открывает экран «Меню»  
2. Выбирает рецепты из предложенного списка  
3. Система формирует меню на основе выбранных рецептов  
4. Backend API сохраняет меню в базе данных  
5. Система отображает готовое меню пользователю  

### Alternative Flows
- 2a. Пользователь не выбирает рецепты → система предлагает меню автоматически  
- 3a. Недостаточно рецептов → система предлагает список покупок  

### Error Handling
- Ошибка сохранения меню → уведомление и повторная попытка  
- Нет интернета → доступ к ранее сохранённым меню  
- Ошибка расчёта калорий → fallback на усреднённые значения  

### User Value
- Экономия времени на планировании  
- Контроль рациона и удобство  
- Сбалансированное питание  

---


